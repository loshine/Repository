# 表达式

## 简化重复表达式

```xml
<ImageView android:visibility="@{user.isAdult ? View.VISIBLE : View.GONE}"/>
<TextView android:visibility="@{user.isAdult ? View.VISIBLE : View.GONE}"/>
<CheckBox android:visibility="@{user.isAdult ? View.VISIBLE : View.GONE}"/>
```

可以简化为

```xml
<ImageView android:id="@+id/avatar"
    android:visibility="@{user.isAdult ? View.VISIBLE : View.GONE}"/>
<TextView android:visibility="@{avatar.visibility}"/>
<CheckBox android:visibility="@{avatar.visibility}"/>
```

## 隐式更新

```xml
<CheckBox android:id="@+id/seeAds"/>
<ImageView android:visibility="@{seeAds.checked ? View.VISIBLE : View.GONE}"/>
```

这样 CheckBox 的状态变更后 ImageView 会自动改变 visibility。

## lambda 表达式

除了直接使用方法引用，在 Presenter 中写和 OnClickListener 一样参数的方法，我们还能使用 Lambda 表达式:

```xml
android:onClick="@{(view)->presenter.save(view, item)}"
android:onClick="@{()->presenter.save(item)}"
android:onFocusChange="@{(v, fcs)->presenter.refresh(item)}"
```

我们还可以在 lambda 表达式引用 view id（像上面表达式链那样），以及 context。