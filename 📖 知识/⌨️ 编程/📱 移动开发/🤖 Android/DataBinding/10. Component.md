# Component 注入

如果我们想要利用 data binding 做一些测试功能怎么办？比如打点，记录一下东西:

```java
public class MyBindingAdapter {
    @BindingAdapter("android:text")
    public static void setText(TextView view, String value) {
        if (isTesting) {
            doTesting(view, value);
        } else {
            TextViewBindingAdapter.setText(view, value)
        }
    }
}
```

但如此一来，我们就要给所有的方法都写上`if/else`，维护起来很困难，也影响美感。

我们就可以使用 component:

```java
public class TestBindingAdapter extends MyBindingAdapter {
    @Override
    public void setText(TextView view, String value) {
        doTesting(view, value);
    }
}

public interface DataBindingComponent {
    MyBindingAdapter getMyBindingAdapter();
}

public class TestComponent implements DataBindingComponent {
    private MyBindingAdapter mAdapter = new TestBindingAdapter();

    public MyBindingAdapter getMyBindingAdapter() {
        return mAdapter;
    }
}
```

静态的 adapter 怎么办呢，我们只需要把 component 作为第一个参数:

```java
@BindingAdapter("android:src")
public static void loadImage(TestComponent component, ImageView view, String url) {
    /// ...
}
```

最后通过`DataBindingUtil.setDefaultComponent(new TestComponent());`就能让 data binding 使用该 Component 提供的 adapter 方法。