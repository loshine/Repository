# xml 使用详解

## 运算符

与 Java 通用的运算符

* 算术运算符：`+`,`-`,`/`,`*`,`%`
* 字符串合并：`+`
* 逻辑运算符：`&&`,`||`
* 位运算符：`&`,`|`,`^`
* 一元运算符：`+`,`-`,`!`,`~`
* 移位运算符：`>>`,`>>>`,`<<`
* 比较运算符：`==`,`>`,`<`,`>=`,`<=`
* 三目运算符：`?:`
* `Instanceof`
* `Grouping()`
* `Cast`
* 方法调用
* Field 访问
* Array 访问 []

### 空合并运算符

会取第一个非空值作为结果

```xml
android:text="@{user.displayName ?? user.lastName}"
```

### 避免空指针

data binding 会自动帮助我们进行空指针的避免，比如说`@{employee.firstName}`，如果 employee 是 null 的话，`employee.firstName` 则会被赋默认值（null）。int 的话，则是0。

### 示例

可以减少 dimen 定义

```xml
android:marginLeft="@{@dimen/margin + @dimen/avatar_size}"
```

还可以直接组合字符串，如:

```xml
android:text="@{@string/nameFormat(firstName, lastName)}"
```

strings.xml

```xml
<string name="nameFormat">%s, %s</string>
```

## 特殊标签

### include

对于`include`的布局，使用方法类似，不过需要在里面绑定两次，外面`include`该布局的 layout 使用`bind:user`设置进去。

```xml
<include layout=“@layout/name” bind:user="@{user}"/>
```
