# RecyclerView 绑定

## 通用 ViewHolder

我们只需要定义一个基类ViewHolder，就可以方便地使用上Data Binding

```kotlin
class BindingViewHolder<out T : ViewDataBinding>(val binding: T) : RecyclerView.ViewHolder(binding.root)
```

## 在 Adapter 中使用

布局文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools">

    <data>

        <variable
            name="string"
            type="String"/>
    </data>

    <TextView
        android:id="@+id/text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="10dp"
        android:text="@{string}"
        tools:text="center"/>

</layout>
```

Adapter 中使用

```kotlin
class StringAdapter(val items: List<String>) : RecyclerView.Adapter<BindingViewHolder<ViewDataBinding>>() {

    override fun getItemCount() = items.size

    override fun onBindViewHolder(holder: BindingViewHolder<ViewDataBinding>?, position: Int) {
        val binding = holder?.binding
        binding?.setVariable(BR.string, items[position])
        binding?.executePendingBindings()
    }

    override fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): BindingViewHolder<ViewDataBinding> {
        val inflater = LayoutInflater.from(parent?.context)
        val binding: ItemRecyclerBinding =
                DataBindingUtil.inflate(inflater, R.layout.item_recycler, parent, false)
        return BindingViewHolder(binding)
    }
}
```