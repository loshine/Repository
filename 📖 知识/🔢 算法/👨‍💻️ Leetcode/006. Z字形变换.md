# Z字形变换

## 题目

将字符串`"PAYPALISHIRING"`以Z字形排列成给定的行数：

![z1](https://i.imgur.com/1DfPH8u.png)

之后从左往右，逐行读取字符：`"PAHNAPLSIIGYIR"`

实现一个将字符串进行指定行数变换的函数:

```kotlin
string convert(string s, int numRows);
```

**示例**:

> **输入**: s = "PAYPALISHIRING", numRows = 4
> **输出**: "PINALSIGYAHRPI"
> **解释**:

![z2](https://i.imgur.com/v7nXxzO.png)

## 解题

### 1. 依次放入对应行

依次遍历字符串中的每个字符，按方向行走并插入到对应行，最终合并。

```kotlin
class Solution {
    fun convert(s: String, numRows: Int): String {

        if (numRows == 1) return s

        val rows = mutableListOf<StringBuilder>()
        for (i in 0 until Math.min(numRows, s.length))
            rows.add(StringBuilder())

        var curRow = 0
        var goingDown = false

        for (c in s) {
            rows[curRow].append(c)
            // 在顶部或者底部，方向改变
            if (curRow == 0 || curRow == numRows - 1) goingDown = !goingDown
            // 根据方向变化当前行数
            curRow += if (goingDown) 1 else -1
        }

        val ret = StringBuilder()
        for (row in rows) ret.append(row)
        return ret.toString()
    }
}
```

### 2. 按规律放入对应行

0 行的数字规律，1 行的数字规律，依次类推。

```kotlin
class Solution {
    fun convert(s: String, numRows: Int): String {

        if (numRows == 1) return s

        val ret = StringBuilder()
        val n = s.length
        val cycleLen = 2 * numRows - 2

        for (i in 0 until numRows) {
            var j = 0
            while (j + i < n) {
                ret.append(s[j + i])
                if (i != 0 && i != numRows - 1 && j + cycleLen - i < n)
                    ret.append(s[j + cycleLen - i])
                j += cycleLen
            }
        }
        return ret.toString()
    }
}
```
