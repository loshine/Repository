# 正则表达式匹配

## 题目

给定一个字符串`s`和一个字符模式`p`。实现支持`.`和`*`的正则表达式匹配。

`.`匹配任意单个字符。
`*`匹配零个或多个前面的元素。

匹配应该覆盖整个字符串`s`，而不是部分字符串。

## 解题

### 1. 递归

```kotlin
class Solution {
    fun isMatch(s: String, p: String): Boolean {
        if (p.isEmpty()) return s.isEmpty()
        // 校验第一个是否匹配
        val firstMatch = !s.isEmpty() && (p[0] == s[0] || p[0] == '.')

        return if (p.length >= 2 && p[1] == '*') {
            isMatch(s, p.substring(2)) || firstMatch && isMatch(s.substring(1), p)
        } else {
            firstMatch && isMatch(s.substring(1), p.substring(1))
        }
    }
}
```

### 2. 动态编程

使用数组来缓存递归的截取字符串，以提升性能。

```kotlin
class Solution {
    fun isMatch(s: String, p: String): Boolean {
        val dp = Array(s.length + 1) { BooleanArray(p.length + 1) }
        dp[s.length][p.length] = true

        for (i in s.length downTo 0) {
            for (j in p.length - 1 downTo 0) {
                val firstMatch = i < s.length && (p[j] == s[i] || p[j] == '.')
                if (j + 1 < p.length && p[j + 1] == '*') {
                    dp[i][j] = dp[i][j + 2] || firstMatch && dp[i + 1][j]
                } else {
                    dp[i][j] = firstMatch && dp[i + 1][j + 1]
                }
            }
        }
        return dp[0][0]
    }
}
```
